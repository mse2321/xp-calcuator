<!DOCTYPE html>
<html ng-app="demo" ng-controller="ctrl" lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta name="description" content="Revyn Tools: XP Calculator | Your RPG Companion!">
        <title>Revyn Tools: XP Calculator</title>
        <!--<link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico" />-->
        <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/angular_material/1.0.0/angular-material.min.css">
        <script type="text/javascript">
          WebFontConfig = {
            google: { families: [ 'Press+Start+2P::latin', 'Roboto::latin' ] }
          };
          (function() {
            var wf = document.createElement('script');
            wf.src = 'https://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
            wf.type = 'text/javascript';
            wf.async = 'true';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(wf, s);
          })(); 
        </script>
        <style>
            body { background-color: #37474F; height: initial; }
            #container { text-align: center; font-family: 'Roboto', sans-serif; padding-top: 70px; padding-bottom: 20px; }
            h1 { color: #37474F; font-family: 'Press Start 2P', sans-serif; margin-bottom: 40px; margin-top: 0; }
            .nav_links { margin-right: 50px; color: white; font-size: 30px; }
            .nav_links a { color: white; }
            nav li { margin-top: 10px; }
            ul { display: block; padding: 0; text-align: right; }
            li { list-style-type: none; }
            a { text-decoration: none; }
            .content_wrap { z-indxe: 500; }
            .controls { float: right; }
            .fa-info-circle { position: absolute; cursor: pointer; top: 20px; right: 20px; display: none; z-index: 1000; color: #90A4AE; font-size: 40px !important; }
            #instructions { width: 400px; height: 400px; background-color: #455A64; color: #ECEFF1; padding: 20px; position: absolute; right: 35px; bottom: 40px; top: 40px; z-index: 500; display: none; border-radius: 5px; text-align: left; }
            #instructions ul { text-align: left; padding: 20px; }
            #instructions li { list-style-type: circle; }
            #numValues { height: 50px; width: 100%; font-size: 16px; vertical-align: middle; }
            #submit { height: 50px; font-family: 'Press Start 2P', sans-serif; font-weight: 900; font-size: 20px; margin-bottom: 30px; padding: 0 20px; background-color: #D50000; color: white; border-radius: 10px; border: none; }
            #submit:hover { background-color: #1565c0; color: white; }
            .lastButton { margin-bottom: 30px; }
            .hidden { display: none; }
            .visible { display: block; }
            #newTotalXp { background-color: #000; padding: 10px 0; width: 100%; color: #C30; font-size: 16px; margin-top: 10px; }
            #nextLevelCalc { margin-top: 20px; color: #D50000; }
            .content { text-align: center; font-size: 1.4em; }
            select{ margin: 0 auto 10px auto; }
            footer { margin-top: 100px; color: #546E7A; padding-bottom: 10px; position: absolute; bottom: 0; left: 0; right: 0; }

            /* angular material styles */
            .md-primary { color: white; }
            md-content { background-color: #f9f9f9; width: 600px; margin: 0 auto; padding: 35px; border: 4px solid #D50000; box-shadow: 10px 10px 10px black; border-radius: 20px; }
            md-input-container { padding: 0; right: 0; }
            .md-button { background-color: #1565C0; }
             @media screen and (max-width: 401px) { #container { padding: 20px 0; } md-content { width: 70%; box-shadow: none; } #instructions { width: 70%; height: 370px; right: 30px; top: 30px; }  .fa-info-circle { top: 5%; right: 9.5%; font-size: 30px !important; } h1 { font-size: 26px; text-align: center; } #submit { width: 100%; padding: 0; margin: 0 auto 30px auto;} footer { margin-top: 20px; bottom: 10px; } }
             @media screen and (min-width: 402px) and (max-width: 799px) { #container { padding: 20px 0; } md-content { width: 70%; box-shadow: none; } #instructions { width: 70%; height: 370px; right: 11%; top: 4%; }  .fa-info-circle { top: 5%; right: 13%; font-size: 30px !important; } h1 { font-size: 26px; text-align: center; } #submit { width: 100%; padding: 0; margin: 0 auto 30px auto;} footer { margin-top: 20px; bottom: 10px; } }
             @media screen and (max-height: 399px) { #container { padding: 20px 0; } md-content { width: 70%; box-shadow: none; } #instructions { width: 70%; height: 40%; right: 11.5%; top: 20px; bottom: 0; }  .fa-info-circle { top: 5%; right: 13%; font-size: 30px !important; } h1 { font-size: 26px; text-align: center; } #submit { width: 100%; padding: 0; margin: 0 auto 30px auto;} footer { margin-top: 20px; bottom: 10px; } }
        </style>
        <link rel="stylesheet" href="files/font-awesome.min.css" />
    </head>

    <body>
        <div id="container">
            <i class="fa fa-info-circle" aria-hidden="true" ng-click="showInstructions()"></i>

            <md-content>
                <header>
                    <h1>XP Calculator</h1>
                </header>
                <section>
                    <div class="content_wrap">
                    
                        <md-input-container class="md-block">
                            <label for="charName">Character Name</label>
                            <input type="text" id="charName" data-inset="true" ng-model="name">
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label for="charLevel">Character Level</label>
                            <input type="text" id="charLevel" data-inset="true" ng-model="level">
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label for="currXp">Current XP</label>
                            <input type="number" id="currXp" data-inset="true" ng-model="xp">
                        </md-input-container>
                        <md-input-container class="md-block">
                            <label for="newXp">Newly Earned XP</label>
                            <input type="number" id="newXp" data-inset="true" ng-model="newXp">
                        </md-input-container>
                        <button type="submit" value="submit" id="submit" ng-click="submit()">Compute</button>
                        <br />
                        <label for="newTotalXp">New Current XP</label>
                        <div id="newTotalXp">
                            {{ totalXp }}
                        </div>
                        <br />
                        <div id="nextLevelCalc">
                            <p class="{{ levelMessage }}">You are&nbsp;&nbsp;{{ neededXp }}xp from level&nbsp;&nbsp;{{ nextLevel }}.</p>
                        </div>
                    </div>
                </section>
            </md-content>

            <aside id="instructions">
                    <h2>How to use</h2>
                    <ul>
                        <li>This is a calculator for table-top role-playing games.</li>
                        <li>Character Levels go from 1 to 20.</li>
                        <li>Your current XP should make sense based on the game you are playing.</li>
                        <li>Your totals will be stored and update as you enter new information throughout your game.</li>
                        <li>For now you only can use this for one character at a time.</li>
                    </ul>
                    <p>Click on or tab the icon to close</p>
            </aside>
            <footer>
                <p>ME Innovation &copy; 2016</p>
            </footer>
        </div>
        <script src="files/jquery.min.js"></script>
        <script src="files/angular.min.js"></script>
        <script src="files/angular-animate.min.js"></script>
        <script src="files/angular-aria.min.js"></script>
        <script src="files/angular-messages.min.js"></script>
        <script src="files/angular-material.min.js"></script>
        <script>
            var demo = angular.module("demo", ['ngMaterial']);

            demo.controller("ctrl", function($scope){
                        $scope.name = "";
                        $scope.level = 1;
                        $scope.nextLevel = 0;
                        $scope.lvThreshold = 0;
                        $scope.xpVales = [0,1000,3000,6000,10000,15000,21000,28000,36000,45000,55000,66000,78000,91000,105000,120000,136000,153000,171000,190000];
                        $scope.xp = "";
                        $scope.newXp1 = "";
                        $scope.neededXp = 0;
                        $scope.newXp2 = "";
                $scope.totalXp = 0;
                $scope.levelMessage = 'ng-hide';

                $scope.submit = function(){

                    $scope.newXpTotal = Number($scope.newXp);
                    $scope.totalXp = Number($scope.xp) + Number($scope.newXpTotal);
                    $scope.nextLevel = Number($scope.level) + 1;
                    $scope.nextLevelValue = $scope.xpVales[$scope.nextLevel - 1];
                    $scope.neededXp = Number($scope.nextLevelValue) - Number($scope.totalXp);
                    $scope.levelMessage = 'ng-show';
                    $scope.xp = $scope.totalXp;
                    $scope.newXp = 0;

                    $scope.checkErrors($scope.neededXp, $scope.nextLevel);

                };

                $scope.checkErrors = function(neededXp, nextLevel){
                    if ($scope.nextLevel > 20 || $scope.nextLevel <= 0 ){
                        alert("Your next level can only be from 1 to 20");
                         $scope.levelMessage = 'ng-hide';
                         $scope.totalXp = 0;
                    } else if ($scope.neededXp < 0  || $scope.neededXp === NaN){
                        alert("Something went wrong! Please make sure your current XP and character level are correct.");
                         $scope.levelMessage = 'ng-hide';
                         $scope.totalXp = 0;
                    }
                };

                $scope.showInstructions = function() {
                    $("#instructions").toggle("slide");
                };

            });
        </script>
    </body>
</html>